import{r as L,a as nn}from"./index.caxmlYbZ.js";const D={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:void 0,SSR:!1};let en=0;function J(n,t){const s=`atom${++en}`,c={toString(){return(D?"production":void 0)!=="production"&&this.debugLabel?s+":"+this.debugLabel:s}};return typeof n=="function"?c.read=n:(c.init=n,c.read=sn,c.write=on),t&&(c.write=t),c}function sn(n){return n(this)}function on(n,t,s){return t(this,typeof s=="function"?s(n(this)):s)}const G=(n,t)=>n.unstable_is?n.unstable_is(t):t===n,W=n=>"init"in n,z=n=>!!n.write,V=Symbol((D?"production":void 0)!=="production"?"CONTINUE_PROMISE":""),$="pending",tn="fulfilled",rn="rejected",un=n=>typeof n=="object"&&n!==null&&V in n,j=new WeakMap,cn=(n,t,s)=>{if(!j.has(n)){let c;const l=new Promise((P,E)=>{let b=n;const p=v=>a=>{b===v&&(l.status=tn,l.value=a,P(a),s())},f=v=>a=>{b===v&&(l.status=rn,l.reason=a,E(a),s())};n.then(p(n),f(n)),c=(v,a)=>{v&&(j.set(v,l),b=v,v.then(p(v),f(v)),t(),t=a)}});l.status=$,l[V]=c,j.set(n,l)}return j.get(n)},dn=n=>typeof n?.then=="function",H=n=>"v"in n||"e"in n,N=n=>{if("e"in n)throw n.e;if((D?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v},U=n=>{const t=n.v;return un(t)&&t.status===$?t:null},K=(n,t,s)=>{s.p.has(n)||(s.p.add(n),t.then(()=>{s.p.delete(n)},()=>{s.p.delete(n)}))},q=(n,t,s,c,l)=>{var P;if((D?"production":void 0)!=="production"&&c===t)throw new Error("[Bug] atom cannot depend on itself");s.d.set(c,l.n);const E=U(s);E&&K(t,E,l),(P=l.m)==null||P.t.add(t),n&&ln(n,c,t)},O=()=>[new Map,new Map,new Set],B=(n,t,s)=>{n[0].has(t)||n[0].set(t,new Set),n[1].set(t,s)},ln=(n,t,s)=>{const c=n[0].get(t);c&&c.add(s)},fn=(n,t)=>n[0].get(t),x=(n,t)=>{n[2].add(t)},T=n=>{for(;n[1].size||n[2].size;){n[0].clear();const t=new Set(n[1].values());n[1].clear();const s=new Set(n[2]);n[2].clear(),t.forEach(c=>{var l;return(l=c.m)==null?void 0:l.l.forEach(P=>P())}),s.forEach(c=>c())}},Q=n=>{let t;(D?"production":void 0)!=="production"&&(t=new Set);const s=(i,o,e,r=()=>{},d=()=>{})=>{const _="v"in o,w=o.v,h=U(o);if(dn(e))if(h)h!==e&&(h[V](e,r),++o.n);else{const y=cn(e,r,d);if(y.status===$)for(const u of o.d.keys())K(i,y,n(u,o));o.v=y,delete o.e}else h&&h[V](Promise.resolve(e),r),o.v=e,delete o.e;(!_||!Object.is(w,o.v))&&++o.n},c=(i,o,e,r)=>{if(!r?.(o)&&H(e)&&(e.m||Array.from(e.d).every(([u,I])=>c(i,u,n(u,e),r).n===I)))return e;e.d.clear();let d=!0;const _=u=>{if(G(o,u)){const A=n(u,e);if(!H(A))if(W(u))s(u,A,u.init);else throw new Error("no atom init");return N(A)}const I=c(i,u,n(u,e),r);if(d)q(i,o,e,u,I);else{const A=O();q(A,o,e,u,I),f(A,o,e),T(A)}return N(I)};let w,h;const y={get signal(){return w||(w=new AbortController),w.signal},get setSelf(){return(D?"production":void 0)!=="production"&&!z(o)&&console.warn("setSelf function cannot be used with read-only atom"),!h&&z(o)&&(h=(...u)=>{if((D?"production":void 0)!=="production"&&d&&console.warn("setSelf function cannot be called in sync"),!d)return p(o,...u)}),h}};try{const u=o.read(_,y);return s(o,e,u,()=>w?.abort(),()=>{if(e.m){const I=O();f(I,o,e),T(I)}}),e}catch(u){return delete e.v,e.e=u,++e.n,e}finally{d=!1}},l=i=>N(c(void 0,i,n(i))),P=(i,o,e)=>{var r,d;const _=new Map;for(const w of((r=e.m)==null?void 0:r.t)||[])_.set(w,n(w,e));for(const w of e.p)_.set(w,n(w,e));return(d=fn(i,o))==null||d.forEach(w=>{_.set(w,n(w,e))}),_},E=(i,o,e)=>{const r=[],d=new Set,_=(y,u)=>{if(!d.has(y)){d.add(y);for(const[I,A]of P(i,y,u))y!==I&&_(I,A);r.push([y,u,u.n])}};_(o,e);const w=new Set([o]),h=y=>d.has(y);for(let y=r.length-1;y>=0;--y){const[u,I,A]=r[y];let F=!1;for(const g of I.d.keys())if(g!==u&&w.has(g)){F=!0;break}F&&(c(i,u,I,h),f(i,u,I),A!==I.n&&(B(i,u,I),w.add(u))),d.delete(u)}},b=(i,o,e,...r)=>{const d=h=>N(c(i,h,n(h,e))),_=(h,...y)=>{const u=n(h,e);let I;if(G(o,h)){if(!W(h))throw new Error("atom not writable");const A="v"in u,F=u.v,g=y[0];s(h,u,g),f(i,h,u),(!A||!Object.is(F,u.v))&&(B(i,h,u),E(i,h,u))}else I=b(i,h,u,...y);return T(i),I};return o.write(d,_,...r)},p=(i,...o)=>{const e=O(),r=b(e,i,n(i),...o);return T(e),r},f=(i,o,e)=>{if(e.m&&!U(e)){for(const r of e.d.keys())e.m.d.has(r)||(v(i,r,n(r,e)).t.add(o),e.m.d.add(r));for(const r of e.m.d||[])if(!e.d.has(r)){e.m.d.delete(r);const d=a(i,r,n(r,e));d?.t.delete(o)}}},v=(i,o,e)=>{if(!e.m){c(i,o,e);for(const r of e.d.keys())v(i,r,n(r,e)).t.add(o);if(e.m={l:new Set,d:new Set(e.d.keys()),t:new Set},(D?"production":void 0)!=="production"&&t.add(o),z(o)&&o.onMount){const r=e.m,{onMount:d}=o;x(i,()=>{const _=d((...w)=>b(i,o,e,...w));_&&(r.u=_)})}}return e.m},a=(i,o,e)=>{if(e.m&&!e.m.l.size&&!Array.from(e.m.t).some(r=>{var d;return(d=n(r,e).m)==null?void 0:d.d.has(o)})){const r=e.m.u;r&&x(i,r),delete e.m,(D?"production":void 0)!=="production"&&t.delete(o);for(const _ of e.d.keys()){const w=a(i,_,n(_,e));w?.t.delete(o)}const d=U(e);d&&d[V](void 0,()=>{});return}return e.m},R={get:l,set:p,sub:(i,o)=>{const e=O(),r=n(i),d=v(e,i,r);T(e);const _=d.l;return _.add(o),()=>{_.delete(o);const w=O();a(w,i,r),T(w)}},unstable_derive:i=>Q(...i(n))};return(D?"production":void 0)!=="production"&&Object.assign(R,{dev4_get_internal_weak_map:()=>({get:o=>{const e=n(o);if(e.n!==0)return e}}),dev4_get_mounted_atoms:()=>t,dev4_restore_atoms:o=>{const e=O();for(const[r,d]of o)if(W(r)){const _=n(r),w="v"in _,h=_.v;s(r,_,d),f(e,r,_),(!w||!Object.is(h,_.v))&&(B(e,r,_),E(e,r,_))}T(e)}}),R},vn=()=>{const n=new WeakMap;return Q(s=>{let c=n.get(s);return c||(c={d:new Map,p:new Set,n:0},n.set(s,c)),c})};let C;const _n=()=>(C||(C=vn(),(D?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=C),globalThis.__JOTAI_DEFAULT_STORE__!==C&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),C),wn={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:void 0,SSR:!1},bn=L.createContext(void 0),Y=n=>L.useContext(bn)||_n(),hn=n=>typeof n?.then=="function",pn=nn.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(n.status="pending",n.then(t=>{n.status="fulfilled",n.value=t},t=>{n.status="rejected",n.reason=t}),n)});function En(n,t){const s=Y(),[[c,l,P],E]=L.useReducer(f=>{const v=s.get(n);return Object.is(f[0],v)&&f[1]===s&&f[2]===n?f:[v,s,n]},void 0,()=>[s.get(n),s,n]);let b=c;return(l!==s||P!==n)&&(E(),b=s.get(n)),L.useEffect(()=>{const f=s.sub(n,()=>{E()});return E(),f},[s,n,void 0]),L.useDebugValue(b),hn(b)?pn(b):b}function an(n,t){const s=Y();return L.useCallback((...l)=>{if((wn?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return s.set(n,...l)},[s,n])}function Dn(n,t){return[En(n),an(n)]}const X={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:void 0,SSR:!1},yn=Symbol((X?"production":void 0)!=="production"?"RESET":""),In=n=>typeof n?.then=="function";function Z(n=()=>{try{return window.localStorage}catch(s){(X?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(s);return}},t){var s;let c,l;const P={getItem:(p,f)=>{var v,a;const k=R=>{if(R=R||"",c!==R){try{l=JSON.parse(R,t?.reviver)}catch{return f}c=R}return l},M=(a=(v=n())==null?void 0:v.getItem(p))!=null?a:null;return In(M)?M.then(k):k(M)},setItem:(p,f)=>{var v;return(v=n())==null?void 0:v.setItem(p,JSON.stringify(f,void 0))},removeItem:p=>{var f;return(f=n())==null?void 0:f.removeItem(p)}},E=p=>(f,v,a)=>p(f,k=>{let M;try{M=JSON.parse(k||"")}catch{M=a}v(M)});let b;try{b=(s=n())==null?void 0:s.subscribe}catch{}return!b&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(b=(p,f)=>{if(!(n()instanceof window.Storage))return()=>{};const v=a=>{a.storageArea===n()&&a.key===p&&f(a.newValue)};return window.addEventListener("storage",v),()=>{window.removeEventListener("storage",v)}}),b&&(P.subscribe=E(b)),P}const Pn=Z();function S(n,t,s=Pn,c){const l=J(t);return(X?"production":void 0)!=="production"&&(l.debugPrivate=!0),l.onMount=E=>{E(s.getItem(n,t));let b;return s.subscribe&&(b=s.subscribe(n,E,t)),b},J(E=>E(l),(E,b,p)=>{const f=typeof p=="function"?p(E(l)):p;return f===yn?(b(l,t),s.removeItem(n)):f instanceof Promise?f.then(v=>(b(l,v),s.setItem(n,v))):(b(l,f),s.setItem(n,f))})}const m=Z(()=>sessionStorage),Rn=S("areas",null,m),Mn=S("datasets",null,m),Tn=J([]),On=J(null);export{Mn as a,On as b,Rn as s,Dn as u,Tn as v};
